<VirtualHost *:80>
    ServerName pillpal.space
    ServerAlias 34.251.39.196

    WSGIDaemonProcess pillpal \
        python-home=/var/www/pillpal/PILLPAL-Backend/venv \
        python-path=/var/www/pillpal/PILLPAL-Backend:/var/www/pillpal/PILLPAL-Backend/src

    WSGIProcessGroup pillpal
    WSGIScriptAlias / /var/www/pillpal/PILLPAL-Backend/wsgi.py

    WSGIApplicationGroup %{GLOBAL}
    WSGIPassAuthorization On
    WSGIChunkedRequest On
    LimitRequestBody 0

    <Directory /var/www/pillpal/PILLPAL-Backend>
        Require all granted
    </Directory>

    RewriteEngine on
    RewriteCond %{HTTPS} !on
    RewriteRule ^ https://pillpal.space%{REQUEST_URI} [END,NE,R=permanent]

    ErrorLog ${APACHE_LOG_DIR}/pillpal_error.log
    CustomLog ${APACHE_LOG_DIR}/pillpal_access.log combined
</VirtualHost>

